В рамках анализа необходимо разработать модель, прогнозирующую вероятность снижения покупательской активности, провести сегментацию пользователей, представить предложения для удержания пользователей. Анализ проводится по четырем датасетам с данными о покупках, просмотрах, маркетинговых активностях, а также данными о времени пребывания на сайте, выручке и прибыльности пользователей. План анализа:
1) загрузка и получение общей информации о датасетах;
2) работа с пропусками, дубликатами, типами данных, названиями столбцов (выявление, обоснование сохранения/удаления, удаление), созданием новых столбцов/датасетов;
3) исследовательский анализ: визуализация посредством графиков каждого признака из датасетов, поиск закономерностей, предварительные выводы по признакам;
4) корреляционный анализ: установление корреляции признаков (входных) с целевым (покупательская активность), построение графиков, выбор признаков для работы с моделями;
5) работа с пайплайнами (констукторами) для прогноза снижения покупательской активности: разделение данных на выборки, подготовка данных, обучение, проверка качества; выбор лучшей модели, выбор метрики;
6) визуализация важности входных признаков, рекомендации для заказчика;
7) прогноз покупательской активности;
8) сегментация пользователей, выделение групп, варианты персонализированных предложений;
9) итоговые выводы.

При работе над проектом были использованы модели опорных векторов, дерева решений, логистической регрессии, ближайших соседений.
По итогам обучения получили данные о том, что лучшей моделью является модель классификации опорных векторов SVC (ядро 'poly', степень 2). Значение метрики roc_auc на тренировочной выборке для этой модели - 0.9019, на тестовой - 0.9064. С учетом небольшой разницы в размере метрик и использования невысокой степени признаки переобучения отсутствуют.
После второго коммита (когда изменили гиперпараметры дерева решений  в части максимального числа признаков и максимальной глубины с диапазона (2,5) на диапазон (2,6) лучшей моделью осталась SVC, но со степенью 4. После третьего коммита (когда сохранились изменения второго коммита и не обучалась модель логистической регрессии) лучшей моделью оказалась модель ближайших соседей с n=3.

Итоговые выводы
1. Изначально работа велась с исходными данными в четырех датасетах, где были устранены неявные дубликаты (тип сервиса), созданы сводные таблицы для лучшей визуализации продолжительности просмотра сайта и выручки по каждому из периодов.
2. Проведена визуализация признаков. По одному из покупателей размер выручки за один из месяцев изменен ввиду несоответствия признаку снижения активности.
3. Проведено объединение трех датасетов, корреляционный анализ (матрица, диаграммы рассеяния). Выявлены некоторые расхождения в значениях коэффициентов по ряду признаков. Принято решение при обучении моделей использовать все входные признаки. Мультиколлинеарность входных признаков отсутствует.
4. По итогам применения пайплайнов определили лучшую модель (опорных векторов с ядром poly и невысокой степенью (2), или степенью 4) или модель ближайших соседей с n=3), что обеспечивает простоту модели в целях пресечения переобучения), метрикой качества избрали roc_auc, которая наиболее полноценно решает задачу классификации, показывает работу модели на всех порогах.
5. По лучшей модели была определена вероятность снижения покупательской активности. В ранее объединенный датасет включены данные по общей выручке за квартал по каждому пользователю, прибыли. Ввиду неясной взаимосвязи между выручкой и прибылью (последняя указана в числах до 8) принято решение не использовать совместно эти два признака.
6. По прогнозу снижения покупательской активности и прибыли от пользователей, используя диаграмму рассеяния, определили три группы пользователей, из которых далее рассмотрели самую многочисленную, с прибылью от 2 до 6. Установили, что эта группа приносит пропорциональную своей доле в числе пользователей долю выручки, акционных покупок. Наиболее значимым оказался вклад этой группы в покупки товаров для детей (самая популярная категория продаваемых товаров). Рекомендовано расширить ассортимент детских товаров на старшую возрастную группу, включить категорию товаров для подростков.
7. Заказчику рекомендуется решить вопрос с неоплаченными товарами (брошенными корзинами, возвратом товаров), поскольку таковых имеется 1184, по одному случаю на пользователя, число неоплаченных товаров составляет до 10. Также заказчику рекомендуется устранить ошибки сервиса, которые становятся очевидными для пользователей. Все эти негативные моменты приводят к снижению выручки. Из проведенного анализа следует, что заказчик смог заинтересовать своим уникальным торговым предложением пользователей, но сохранение багов и постоянно высокого уровня неоплаченных товаров ведет к злоупотреблению интернет-магазином своим положением и в итоге может привести к оттоку пользователей.




